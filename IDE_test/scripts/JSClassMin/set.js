!function(e){var t="object"==typeof exports,n="undefined"==typeof JS?require("./core"):JS,r=n.Enumerable||require("./enumerable").Enumerable,s=n.Hash?n:require("./hash");t&&(exports.JS=exports),e(n,r,s,t?exports:n)}(function(e,t,n,r){"use strict";var s=new e.Class("Set",{extend:{forEach:function(e,t,n){if(e&&t){if(e.forEach)return e.forEach(t,n);for(var r=0,s=e.length;s>r;r++)void 0!==e[r]&&t.call(n,e[r],r)}}},include:t||{},initialize:function(e,t,n){this.clear(),t?this.klass.forEach(e,function(e){this.add(t.call(n,e))},this):this.merge(e)},forEach:function(e,n){return e?(e=t.toFn(e),this._members.forEachKey(e,n),this):this.enumFor("forEach")},add:function(e){return this.contains(e)?!1:(this._members.store(e,!0),this.length=this.size=this._members.length,!0)},classify:function(e,r){if(!e)return this.enumFor("classify");e=t.toFn(e);var s=new n.Hash;return this.forEach(function(t){var n=e.call(r,t);s.hasKey(n)||s.store(n,new this.klass),s.get(n).add(t)},this),s},clear:function(){this._members=new n.Hash,this.size=this.length=0},complement:function(e){var t=new this.klass;return this.klass.forEach(e,function(e){this.contains(e)||t.add(e)},this),t},contains:function(e){return this._members.hasKey(e)},difference:function(t){t=e.isType(t,s)?t:new s(t);var n=new this.klass;return this.forEach(function(e){t.contains(e)||n.add(e)}),n},divide:function(e,n){if(!e)return this.enumFor("divide");e=t.toFn(e);var r=this.classify(e,n),i=new s;return r.forEachValue(i.method("add")),i},equals:function(t){if(this.length!==t.length||!e.isType(t,s))return!1;var n=!0;return this.forEach(function(e){n&&(t.contains(e)||(n=!1))}),n},hash:function(){var e=[];return this.forEach(function(t){e.push(n.Hash.codeFor(t))}),e.sort().join("")},flatten:function(t){var n=new this.klass;return n._members=this._members,t||(t=this,t.clear()),n.forEach(function(n){e.isType(n,s)?n.flatten(t):t.add(n)}),t},inspect:function(){return""+this},intersection:function(e){var t=new this.klass;return this.klass.forEach(e,function(e){this.contains(e)&&t.add(e)},this),t},isEmpty:function(){return 0===this._members.length},isProperSubset:function(e){return this._members.length<e._members.length&&this.isSubset(e)},isProperSuperset:function(e){return this._members.length>e._members.length&&this.isSuperset(e)},isSubset:function(e){var t=!0;return this.forEach(function(n){t&&(e.contains(n)||(t=!1))}),t},isSuperset:function(e){return e.isSubset(this)},keepIf:function(e,t){return this.removeIf(function(){return!e.apply(t,arguments)})},merge:function(e){this.klass.forEach(e,function(e){this.add(e)},this)},product:function(e){var t=new s;return this.forEach(function(n){this.klass.forEach(e,function(e){t.add([n,e])})},this),t},rebuild:function(){this._members.rehash(),this.length=this.size=this._members.length},remove:function(e){this._members.remove(e),this.length=this.size=this._members.length},removeIf:function(e,n){return e?(e=t.toFn(e),this._members.removeIf(function(t){return e.call(n,t.key)}),this.length=this.size=this._members.length,this):this.enumFor("removeIf")},replace:function(e){this.clear(),this.merge(e)},subtract:function(e){this.klass.forEach(e,function(e){this.remove(e)},this)},toString:function(){var e=[];return this.forEach(function(t){e.push(""+t)}),this.klass.displayName+":{"+e.join(",")+"}"},union:function(e){var t=new this.klass;return t.merge(this),t.merge(e),t},xor:function(e){var t=new this.klass(e);return this.forEach(function(e){t[t.contains(e)?"remove":"add"](e)}),t},_indexOf:function(e){for(var n=this._members.length,r=t;n--;)if(r.areEqual(e,this._members[n]))return n;return-1}});s.alias({n:"intersection",u:"union",x:"product"});var i=new e.Class("OrderedSet",s,{clear:function(){this._members=new n.OrderedHash,this.size=this.length=0}}),o=new e.Class("SortedSet",s,{extend:{compare:function(t,n){return e.isType(t,Object)?t.compareTo(n):n>t?-1:t>n?1:0}},forEach:function(e,n){return e?(e=t.toFn(e),this.klass.forEach(this._members,e,n),this):this.enumFor("forEach")},add:function(e){var t=this._indexOf(e,!0);return null===t?!1:(this._members.splice(t,0,e),this.length=this.size=this._members.length,!0)},clear:function(){this._members=[],this.size=this.length=0},contains:function(e){return-1!==this._indexOf(e)},rebuild:function(){var e=this._members;this.clear(),this.merge(e)},remove:function(e){var t=this._indexOf(e);-1!==t&&(this._members.splice(t,1),this.length=this.size=this._members.length)},removeIf:function(e,n){if(!e)return this.enumFor("removeIf");e=t.toFn(e);for(var r=this._members,s=r.length;s--;)e.call(n,r[s])&&this.remove(r[s]);return this},_indexOf:function(e,n){var r,s=this._members,i=s.length,o=0,a=i,u=this.klass.compare,c=t;if(0===i)return n?0:-1;for(u(e,s[0])<1&&(a=0,o=0),u(e,s[i-1])>0&&(a=0,o=i);!c.areEqual(e,s[o])&&a>.5;)a/=2,o+=(u(e,s[o])>0?1:-1)*Math.round(a),o>0&&u(e,s[o-1])>0&&u(e,s[o])<1&&(a=0);for(;s[o]&&!c.areEqual(e,s[o])&&0===u(e,s[o]);)o+=1;return r=c.areEqual(e,s[o]),n?r?null:o:r?o:-1}});t.include({toSet:function(e,t,n){return e=e||s,new e(this,t,n)}}),r.Set=r.HashSet=s,r.OrderedSet=i,r.SortedSet=o});
//@ sourceMappingURL=set.js.map