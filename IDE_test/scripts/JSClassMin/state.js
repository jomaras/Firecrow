!function(e){var t="object"==typeof exports,n="undefined"==typeof JS?require("./core"):JS;t&&(exports.JS=exports),e(n,t?exports:n)}(function(e,t){"use strict";var n=new e.Module("State",{__getState__:function(e){return"object"==typeof e?e:"string"==typeof e?(this.states||{})[e]:{}},setState:function(e){this.__state__=this.__getState__(e),n.addMethods(this.__state__,this.klass)},inState:function(){for(var e=arguments.length;e--;)if(this.__state__===this.__getState__(arguments[e]))return!0;return!1},extend:{ClassMethods:new e.Module({states:function(e){this.define("states",n.buildCollection(this,e))}}),included:function(e){e.extend(this.ClassMethods)},stub:function(){return this},buildStubs:function(e,t,n){var r,s;for(r in n){t[r]={};for(s in n[r])e[s]=this.stub}},findStates:function(e,t){for(var n=e.length,r=[];n--;)e[n].hasOwnProperty(t)&&r.push(e[n][t]);return r},buildCollection:function(t,n){var r,s,i,o,a,u,c,l={},h={},f=t.lookup("states");for(this.buildStubs(l,h,n),u=0,c=f.length;c>u;u++)this.buildStubs(l,h,f[u]);for(r in h){for(s=new e.Class(n[r]),a=this.findStates(f,r),u=a.length;u--;)a[u]&&s.include(a[u].klass);i={};for(o in l)s.prototype[o]||(i[o]=l[o]);s.include(i),h[r]=new s}return t.__tgt__&&this.addMethods(l,t.__tgt__.klass),h},addMethods:function(e,t){if(t){var n,r=t.prototype;for(n in e)r[n]||t.define(n,this.wrapped(n))}},wrapped:function(e){return function(){var t=(this.__state__||{})[e];return t?t.apply(this,arguments):this}}}});t.State=n});
//@ sourceMappingURL=state.js.map