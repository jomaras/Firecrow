!function(e){var t="object"==typeof exports,n="undefined"==typeof JS?require("./core"):JS;t&&(exports.JS=exports),e(n,t?exports:n)}(function(e,t){"use strict";var n=new e.Module("Enumerable",{extend:{ALL_EQUAL:{},forEach:function(e,t){if(!e)return new Enumerator(this,"forEach");for(var n=0;n<this.length;n++)e.call(t,this[n]);return this},isComparable:function(e){return e.all(function(e){return"function"==typeof e.compareTo})},areEqual:function(e,t){var n;if(e===t)return!0;if(e&&"function"==typeof e.equals)return e.equals(t);if(e instanceof Function)return e===t;if(e instanceof Array){if(!(t instanceof Array))return!1;for(var r=0,s=e.length;s>r;r++){if(n=this.areEqual(e[r],t[r]),n===this.ALL_EQUAL)return!0;if(!n)return!1}return e.length!==t.length?!1:!0}if(e instanceof Date)return t instanceof Date?e.getTime()!==t.getTime()?!1:!0:!1;if(e instanceof Object){if(!(t instanceof Object))return!1;if(this.objectSize(e)!==this.objectSize(t))return!1;for(var i in e)if(!this.areEqual(e[i],t[i]))return!1;return!0}return!1},objectKeys:function(e,t){var n=[];for(var r in e)(e.hasOwnProperty(r)||t!==!1)&&n.push(r);return n},objectSize:function(e){return this.objectKeys(e).length},Collection:new e.Class({initialize:function(e){this.length=0,e&&n.forEach.call(e,this.push,this)},push:function(e){Array.prototype.push.call(this,e)},clear:function(){for(var e=this.length;e--;)delete this[e];this.length=0}})},all:function(e,t){e=n.toFn(e);var r=!0;return this.forEach(function(n){r=r&&(e?e.apply(t,arguments):n)}),!!r},any:function(e,t){e=n.toFn(e);var r=!1;return this.forEach(function(n){r=r||(e?e.apply(t,arguments):n)}),!!r},chunk:function(e,t){if(!e)return this.enumFor("chunk");var r=[],s=null,i=!1;return this.forEach(function(a){var o=e.apply(t,arguments);i?n.areEqual(s,o)?r[r.length-1][1].push(a):r.push([o,[a]]):(r.push([o,[a]]),i=!0),s=o}),r},count:function(e,t){if("function"==typeof this.size)return this.size();var r=0,s=e;return e&&"function"!=typeof e&&(e=function(e){return n.areEqual(e,s)}),this.forEach(function(){(!e||e.apply(t,arguments))&&(r+=1)}),r},cycle:function(e,t,r){if(!t)return this.enumFor("cycle",e);for(t=n.toFn(t);e--;)this.forEach(t,r)},drop:function(e){var t=[];return this.forEachWithIndex(function(n,r){r>=e&&t.push(n)}),t},dropWhile:function(e,t){if(!e)return this.enumFor("dropWhile");e=n.toFn(e);var r=[],s=!0;return this.forEach(function(n){s&&(s=s&&e.apply(t,arguments)),s||r.push(n)}),r},forEachCons:function(e,t,r){if(!t)return this.enumFor("forEachCons",e);t=n.toFn(t);var s,i=this.toArray(),a=i.length,o=a-e;for(s=0;o>=s;s++)t.call(r,i.slice(s,s+e));return this},forEachSlice:function(e,t,r){if(!t)return this.enumFor("forEachSlice",e);t=n.toFn(t);var s,i=this.toArray(),a=i.length,o=Math.ceil(a/e);for(s=0;o>s;s++)t.call(r,i.slice(s*e,(s+1)*e));return this},forEachWithIndex:function(e,t,r){return"function"==typeof e&&(r=t,t=e,e=0),e=e||0,t?(t=n.toFn(t),this.forEach(function(n){var s=t.call(r,n,e);return e+=1,s})):this.enumFor("forEachWithIndex",e)},forEachWithObject:function(t,r,s){return r?(r=n.toFn(r),this.forEach(function(){var n=[t].concat(e.array(arguments));r.apply(s,n)}),t):this.enumFor("forEachWithObject",t)},find:function(e,t){if(!e)return this.enumFor("find");e=n.toFn(e);var r={},s=r;return this.forEach(function(n){r===s&&(r=e.apply(t,arguments)?n:r)}),r===s?null:r},findIndex:function(e,t){if(void 0===e)return this.enumFor("findIndex");var r=null,s="function"==typeof e;return this.forEachWithIndex(function(i,a){null===r&&(n.areEqual(e,i)||s&&e.apply(t,arguments))&&(r=a)}),r},first:function(e){var t=this.toArray();return void 0===e?t[0]:t.slice(0,e)},grep:function(t,r,s){r=n.toFn(r);var i=[];return this.forEach(function(n){var a="function"==typeof t.match?t.match(n):"function"==typeof t.test?t.test(n):e.isType(n,t);a&&(r&&(n=r.apply(s,arguments)),i.push(n))}),i},groupBy:function(t,r){if(!t)return this.enumFor("groupBy");t=n.toFn(t);var s=("function"==typeof require?require("./hash"):e).Hash,i=new s;return this.forEach(function(e){var n=t.apply(r,arguments);i.hasKey(n)||i.store(n,[]),i.get(n).push(e)}),i},inject:function(t,r,s){var i=e.array(arguments),a=0,o={};switch(i.length){case 1:t=o,r=i[0];break;case 2:"function"==typeof t&&(t=o,r=i[0],s=i[1])}return r=n.toFn(r),this.forEach(function(n){if(!a++&&t===o)return t=n;var i=[t].concat(e.array(arguments));t=r.apply(s,i)}),t},map:function(e,t){if(!e)return this.enumFor("map");e=n.toFn(e);var r=[];return this.forEach(function(){r.push(e.apply(t,arguments))}),r},max:function(e,t){return this.minmax(e,t)[1]},maxBy:function(e,t){return e?this.minmaxBy(e,t)[1]:this.enumFor("maxBy")},member:function(e){return this.any(function(t){return n.areEqual(t,e)})},min:function(e,t){return this.minmax(e,t)[0]},minBy:function(e,t){return e?this.minmaxBy(e,t)[0]:this.enumFor("minBy")},minmax:function(e,t){var n=this.sort(e,t);return[n[0],n[n.length-1]]},minmaxBy:function(e,t){if(!e)return this.enumFor("minmaxBy");var n=this.sortBy(e,t);return[n[0],n[n.length-1]]},none:function(e,t){return!this.any(e,t)},one:function(e,t){e=n.toFn(e);var r=0;return this.forEach(function(n){(e?e.apply(t,arguments):n)&&(r+=1)}),1===r},partition:function(e,t){if(!e)return this.enumFor("partition");e=n.toFn(e);var r=[],s=[];return this.forEach(function(n){(e.apply(t,arguments)?r:s).push(n)}),[r,s]},reject:function(e,t){if(!e)return this.enumFor("reject");e=n.toFn(e);var r=[];return this.forEach(function(n){e.apply(t,arguments)||r.push(n)}),r},reverseForEach:function(e,t){if(!e)return this.enumFor("reverseForEach");e=n.toFn(e);for(var r=this.toArray(),s=r.length;s--;)e.call(t,r[s]);return this},select:function(e,t){if(!e)return this.enumFor("select");e=n.toFn(e);var r=[];return this.forEach(function(n){e.apply(t,arguments)&&r.push(n)}),r},sort:function(e,t){var r=n.isComparable(this),s=this.toArray();return e=e||(r?function(e,t){return e.compareTo(t)}:null),e?s.sort(function(n,r){return e.call(t,n,r)}):s.sort()},sortBy:function(e,t){if(!e)return this.enumFor("sortBy");e=n.toFn(e);var r=n,s=new r.Collection(this.map(e,t)),i=r.isComparable(s);return new r.Collection(s.zip(this).sort(function(e,t){return e=e[0],t=t[0],i?e.compareTo(t):t>e?-1:e>t?1:0})).map(function(e){return e[1]})},take:function(e){var t=[];return this.forEachWithIndex(function(n,r){e>r&&t.push(n)}),t},takeWhile:function(e,t){if(!e)return this.enumFor("takeWhile");e=n.toFn(e);var r=[],s=!0;return this.forEach(function(n){s&&(s=s&&e.apply(t,arguments)),s&&r.push(n)}),r},toArray:function(){return this.drop(0)},zip:function(){var t,r,s=n,i=[],a=0,o=arguments.length;"function"==typeof arguments[o-1]&&(t=arguments[o-1],r={}),"function"==typeof arguments[o-2]&&(t=arguments[o-2],r=arguments[o-1]),s.forEach.call(arguments,function(n){n!==t&&n!==r&&(n.toArray&&(n=n.toArray()),e.isType(n,Array)&&i.push(n))});var u=this.map(function(e){var t=[e];return s.forEach.call(i,function(e){t.push(void 0===e[a]?null:e[a])}),++a&&t});return t?(s.forEach.call(u,t,r),void 0):u}});n.define("forEach",n.forEach),n.alias({collect:"map",detect:"find",entries:"toArray",every:"all",findAll:"select",filter:"select",reduce:"inject",some:"any"}),n.extend({toFn:function(t){return t?t.toFunction?t.toFunction():this.OPS[t]?this.OPS[t]:e.isType(t,"string")||e.isType(t,String)?function(){var n=e.array(arguments),r=n.shift(),s=r[t];return"function"==typeof s?s.apply(r,n):s}:t:t},OPS:{"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"&&":function(e,t){return e&&t},"|":function(e,t){return e|t},"||":function(e,t){return e||t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return t>e},"<=":function(e,t){return t>=e},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"[]":function(e,t){return e[t]},"()":function(e,t){return e(t)}},Enumerator:new e.Class({include:n,extend:{DEFAULT_METHOD:"forEach"},initialize:function(e,t,n){this._object=e,this._method=t||this.klass.DEFAULT_METHOD,this._args=(n||[]).slice()},equals:function(t){return e.isType(t,this.klass)&&this._object===t._object&&this._method===t._method&&n.areEqual(this._args,t._args)},forEach:function(e,t){if(!e)return this;var n=this._args.slice();return n.push(e),t&&n.push(t),this._object[this._method].apply(this._object,n)}})}),n.Enumerator.alias({cons:"forEachCons",reverse:"reverseForEach",slice:"forEachSlice",withIndex:"forEachWithIndex",withObject:"forEachWithObject"}),n.Collection.include(n),e.Kernel.include({enumFor:function(t){var r=e.array(arguments),t=r.shift();return new n.Enumerator(this,t,r)}},{_resolve:!1}),e.Kernel.alias({toEnum:"enumFor"}),t.Enumerable=n});
//@ sourceMappingURL=enumerable.js.map