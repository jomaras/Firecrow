!function(e){var t="object"==typeof exports,n="undefined"==typeof JS?require("./core"):JS;t&&(exports.JS=exports),e(n,t?exports:n)}(function(e,t){"use strict";var n=new e.Module("Deferrable",{extend:{Timeout:new e.Class(Error)},callback:function(e,t){return"success"===this.__deferredStatus__?e.apply(t,this.__deferredValue__):("failure"!==this.__deferredStatus__&&(this.__callbacks__=this.__callbacks__||[],this.__callbacks__.push([e,t])),void 0)},errback:function(e,t){return"failure"===this.__deferredStatus__?e.apply(t,this.__deferredValue__):("success"!==this.__deferredStatus__&&(this.__errbacks__=this.__errbacks__||[],this.__errbacks__.push([e,t])),void 0)},timeout:function(t){this.cancelTimeout();var r=this,s=new n.Timeout;this.__timeout__=e.ENV.setTimeout(function(){r.fail(s)},t)},cancelTimeout:function(){this.__timeout__&&(e.ENV.clearTimeout(this.__timeout__),delete this.__timeout__)},setDeferredStatus:function(e,t){switch(this.__deferredStatus__=e,this.__deferredValue__=t,this.cancelTimeout(),e){case"success":if(!this.__callbacks__)return;for(var n;n=this.__callbacks__.pop();)n[0].apply(n[1],t);break;case"failure":if(!this.__errbacks__)return;for(var r;r=this.__errbacks__.pop();)r[0].apply(r[1],t)}},succeed:function(){return this.setDeferredStatus("success",arguments)},fail:function(){return this.setDeferredStatus("failure",arguments)}});t.Deferrable=n});
//@ sourceMappingURL=deferrable.js.map