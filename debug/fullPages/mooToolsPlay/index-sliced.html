<!DOCTYPE html>
<html>
<head>
    <title>MooTools break-down</title>
    <meta charset="UTF-8"/>
</head>
<body>
    <h1> MooTools break down </h1>
    <div id="mainContentContainer"></div>
    <script>
  var Native = function(options)
  {
    var name = options.name;
    var legacy = options.legacy;
    var protect = options.protect;
    var initialize = options.initialize;
    if(options.afterImplement)
    {
      var afterImplement = options.afterImplement;
    }

    if(initialize)
    {
      var object = initialize;
    }

    if(legacy && initialize)
    {
      object.prototype = legacy.prototype;
    }

    if(name)
    {
      var family = name.toLowerCase();
      object.prototype.$family = {
        name: family
      };
    }

    var add = function(obj, name, method, force)
    {
      if(!protect || force || !(obj.prototype[name]))
      {
        obj.prototype[name] = method;
      }

      afterImplement.call(obj, name, method);
    };
    object.alias = function(a1, a2, a3)
    {
      if(typeof a1 == 'string')
      {
        var pa1 = this.prototype[a1];
        if(a1 = pa1)
        {
          var res = add(this, a2, a1, a3);
        }
      }
    };
    object.implement = function(a1, a2, a3)
    {
      for(var p in a1)
      {
        add(this, p, a1[p], a2);
      }
    };
    return object;
  };
  Native.implement = function(objects, properties)
  {
    for(var i = 0, l = objects.length;i < l;i++)
    {
      objects[i].implement(properties);
    }
  };
  (function()
  {
    var natives = {
      'Array': Array, 
      'Date': Date, 
      'Function': Function, 
      'Number': Number, 
      'RegExp': RegExp, 
      'String': String
    };
    for(var n in natives)
    {
      new Native({
        name: n, 
        initialize: natives[n], 
        protect: true
      });
    }
  })();
  var Hash = new Native({
    name: 'Hash', 
    initialize: function(object)
    {}
  });
  Hash.implement({
    forEach: function(fn, bind)
    {}, 
    getClean: function()
    {}, 
    getLength: function()
    {}
  });
  Hash.alias('forEach', 'each');
  Array.implement({
    forEach: function(fn, bind)
    {}
  });
  Array.alias('forEach', 'each');
  function $merge()
  {
    var args = Array.slice(arguments);
    args.unshift({});
    return $mixin.apply(null, args);
  }
  function $mixin(mix)
  {
    for(var i = 1, l = arguments.length;i < l;i++)
    {
      var object = arguments[i];
      for(var key in object)
      {
        var op = object[key], mp = mix[key];
        if(mp);
        else 
        {
          mix[key] = $unlink(op);
        }
      }
    }

    return mix;
  }
  function $pick()
  {
    for(var i = 0, l = arguments.length;i < l;i++)
    {
      if(arguments[i] != undefined)
      {
        return arguments[i];
      }
    }
  }
  function $type(obj)
  {
    if(obj == undefined)
    {
      return false;
    }

    if(obj.$family)
    {
      if(obj.$family.name == 'number' && !(isFinite(obj)));
      else 
      {
        return obj.$family.name;
      }
    }

    return typeof obj;
  }
  function $unlink(object)
  {
    var unlinked;
    switch($type(object))
    {
      case 'object':
        unlinked = {};
        for(var p in object)
        {
          unlinked[p] = $unlink(object[p]);
        }

        break;
      case 'array':
        break;
      default:
        return object;
    }
    return unlinked;
  }
  var platformName;
  if(window.orientation != undefined);
  else 
  {
    platformName = (navigator.platform.match(/mac|win|linux/i))[0].toLowerCase();
  }

  var Browser = $merge({
    Engine: {name: 'unknown', version: 0}, 
    Platform: {
      name: platformName
    }, 
    Features: {
      xpath: !(!(document.evaluate)), 
      air: !(!(window.runtime)), 
      query: !(!(document.querySelector))
    }, 
    Plugins: {}, 
    Engines: {
      presto: function()
      {
        if(!(window.opera))
        {
          return false;
        }
      }, 
      trident: function()
      {
        if(!(window.ActiveXObject))
        {
          return false;
        }
      }, 
      webkit: function()
      {
        if(navigator.taintEnabled)
        {
          return false;
        }
      }, 
      gecko: function()
      {
        if(!(document.getBoxObjectFor) && window.mozInnerScreenX == null);
        else 
        {
          if(document.getElementsByClassName)
          {
            return 19;
          }
        }
      }
    }
  }, Browser || {});
  Browser.detect = function()
  {
    for(var engine in this.Engines)
    {
      var version = this.Engines[engine]();
      if(version)
      {
        this.Engine = {};
        break;
      }
    }
  };
  Browser.detect();
  Native.UID = 1;
  var nonTridentFunction = function(item)
  {
    if(item.uid);
    else 
    {
      item.uid = Native.UID++;
    }
  };
  var $uid;
  if(Browser.Engine.trident);
  else 
  {
    $uid = nonTridentFunction;
  }

  var windowLegacy;
  if(!(Browser.Engine.trident))
  {
    windowLegacy = window.Window;
  }

  var Window = new Native({
    name: 'Window', 
    legacy: windowLegacy, 
    initialize: function(win)
    {
      $uid(win);
    }, 
    afterImplement: function(property, value)
    {
      window[property] = Window.Prototype[property] = value;
    }
  });
  Window.Prototype = {};
  new Window(window);
  var documentLegacy;
  if(!(Browser.Engine.trident))
  {
    documentLegacy = window.Document;
  }

  var Document = new Native({
    name: 'Document', 
    legacy: documentLegacy, 
    initialize: function(doc)
    {
      $uid(doc);
    }, 
    afterImplement: function(property, value)
    {
      document[property] = Document.Prototype[property] = value;
    }
  });
  Document.Prototype = {};
  new Document(document);
  Array.implement({
    every: function(fn, bind)
    {}, 
    filter: function(fn, bind)
    {}, 
    clean: function()
    {}, 
    indexOf: function(item, from)
    {}, 
    map: function(fn, bind)
    {}, 
    some: function(fn, bind)
    {}, 
    associate: function(keys)
    {}, 
    link: function(object)
    {}, 
    contains: function(item, from)
    {}, 
    extend: function(array)
    {}, 
    getLast: function()
    {}, 
    getRandom: function()
    {}, 
    include: function(item)
    {}, 
    combine: function(array)
    {}, 
    erase: function(item)
    {}, 
    empty: function()
    {}, 
    flatten: function()
    {}, 
    hexToRgb: function(array)
    {}, 
    rgbToHex: function(array)
    {}
  });
  Function.implement({
    extend: function(properties)
    {
      for(var property in properties)
      {
        this[property] = properties[property];
      }

      return this;
    }, 
    create: function(options)
    {
      var self = this;
      return function(event)
      {
        var args = options.arguments;
        if(args != undefined);
        else 
        {
          var optionsEvent;
          if(options.event);
          else 
          {
            optionsEvent = 0;
          }

          args = Array.slice(arguments, optionsEvent);
        }

        var returns = function()
        {
          var applyArg;
          if(options.bind)
          {
            applyArg = options.bind;
          }

          return self.apply(applyArg, args);
        };
        return returns();
      };
    }, 
    run: function(args, bind)
    {}, 
    pass: function(args, bind)
    {}, 
    bind: function(bind, args)
    {}, 
    bindWithEvent: function(bind, args)
    {}, 
    attempt: function(args, bind)
    {}, 
    delay: function(delay, bind, args)
    {}, 
    periodical: function(periodical, bind, args)
    {}
  });
  Number.implement({
    limit: function(min, max)
    {}, 
    round: function(precision)
    {}, 
    times: function(fn, bind)
    {}, 
    toFloat: function()
    {}, 
    toInt: function(base)
    {}
  });
  (function(math)
  {
    var methods = {};
    math.each(function(name)
    {
      if(!(Number[name]))
      methods[name] = function()
      {};
    });
    Number.implement(methods);
  })(['abs', 'acos', 'asin', 'atan', 'atan2', 'ceil', 'cos', 'exp', 'floor', 'log', 'max', 'min', 'pow', 'sin', 'sqrt', 'tan']);
  String.implement({
    test: function(regex, params)
    {}, 
    contains: function(string, separator)
    {}, 
    trim: function()
    {}, 
    clean: function()
    {}, 
    camelCase: function()
    {}, 
    hyphenate: function()
    {}, 
    capitalize: function()
    {}, 
    escapeRegExp: function()
    {}, 
    toInt: function(base)
    {}, 
    toFloat: function()
    {}, 
    hexToRgb: function(array)
    {}, 
    rgbToHex: function(array)
    {}, 
    stripScripts: function(option)
    {}, 
    substitute: function(object, regexp)
    {}
  });
  Hash.implement({
    has: Object.prototype.hasOwnProperty, 
    keyOf: function(value)
    {}, 
    hasValue: function(value)
    {}, 
    extend: function(properties)
    {}, 
    combine: function(properties)
    {}, 
    erase: function(key)
    {}, 
    get: function(key)
    {}, 
    set: function(key, value)
    {}, 
    empty: function()
    {}, 
    include: function(key, value)
    {}, 
    map: function(fn, bind)
    {}, 
    filter: function(fn, bind)
    {}, 
    every: function(fn, bind)
    {}, 
    some: function(fn, bind)
    {}, 
    getKeys: function()
    {}, 
    getValues: function()
    {}, 
    toQueryString: function(base)
    {}
  });
  var Event = new Native({
    name: 'Event', 
    initialize: function(event, win)
    {}
  });
  Event.implement({
    stop: function()
    {}, 
    stopPropagation: function()
    {}, 
    preventDefault: function()
    {}
  });
  function Class(params)
  {
    var newClass = (function()
    {}).extend(this);
    newClass.implement(params);
  }
  (new Native({
    name: 'Class', 
    initialize: Class
  }));
  Class.implement({
    implement: function(key, value)
    {
      if($type(key) == 'object')
      {
        for(var p in key)
        {
          this.implement(p, key[p]);
        }
      }

      var proto = this.prototype;
      switch($type(value))
      {
        case 'function':
          break;
        case 'object':
          var previous = proto[key]
          if($type(previous) == 'object');
          else 
          {
            $unlink(value);
          }

          break;
        case 'array':
          $unlink(value);
          break;
      }
    }
  });
  var Chain = new Class({
    $chain: [], 
    chain: function()
    {}, 
    callChain: function()
    {}, 
    clearChain: function()
    {}
  });
  var Events = new Class({
    $events: {}, 
    addEvent: function(type, fn, internal)
    {}, 
    addEvents: function(events)
    {}, 
    fireEvent: function(type, args, delay)
    {}, 
    removeEvent: function(type, fn)
    {}, 
    removeEvents: function(events)
    {}
  });
  var Options = new Class({
    setOptions: function()
    {}
  });
  var Element = new Native({
    name: 'Element', 
    legacy: window.Element, 
    initialize: function(tag, props)
    {}, 
    afterImplement: function(key, value)
    {
      Elements.implement(key, function()
      {});
    }
  });
  var Elements = new Native({
    initialize: function(elements, options)
    {}
  });
  Elements.implement({
    filter: function(filter, bind)
    {}
  });
  Document.implement({
    newElement: function(tag, props)
    {}, 
    newTextNode: function(text)
    {}, 
    getDocument: function()
    {}, 
    getWindow: function()
    {}, 
    id: (function()
    {
      return function(el, nocash, doc)
      {};
    })()
  });
  if(window.$ == null)
  {
    Window.implement({
      $: function(el, nc)
      {}
    });
  }

  Window.implement({
    $$: function(selector)
    {}, 
    getDocument: function()
    {}, 
    getWindow: function()
    {}
  });
  Native.implement([Element, Document], {
    getElement: function(selector, nocash)
    {}, 
    getElements: function(tags, nocash)
    {}
  });
  (function()
  {
    var storage = {};
    var get = function(uid)
    {
      var arg = storage[uid];
      if(!arg)
      {
        arg = storage[uid] = {};
      }

      return arg;
    };
    var purge = function()
    {};
    Native.implement([Window, Document], {
      addListener: function(type, fn)
      {
        if(type == 'unload')
        {
          fn = function()
          {};
        }

        if(this.addEventListener)
        {
          this.addEventListener(type, fn, false);
        }
      }, 
      removeListener: function(type, fn)
      {}, 
      retrieve: function(property, dflt)
      {
        var storage = get(this.uid), prop = storage[property];
        if(dflt != undefined && prop == undefined)
        {
          prop = storage[property] = dflt;
        }

        return $pick(prop);
      }, 
      store: function(property, value)
      {}, 
      eliminate: function(property)
      {}
    });
    window.addListener('unload', purge);
  })();
  Native.implement([Window, Document], {
    addEvent: function(type, fn)
    {
      var events = this.retrieve('events', {});
      if(!(events[type]))
      {
        events[type] = {
          'keys': []
        };
      }

      var realType = type, self = this;
      var defn = function()
      {
        return fn.call(self);
      };
      var nativeEvent = Element.NativeEvents[realType];
      if(nativeEvent)
      {
        this.addListener(realType, defn);
      }
    }, 
    removeEvent: function(type, fn)
    {}, 
    addEvents: function(events)
    {}, 
    removeEvents: function(events)
    {}, 
    fireEvent: function(type, args, delay)
    {
      var events = this.retrieve('events');
      events[type].keys.each(function(fn)
      {
        fn.create({
          'bind': this
        })();
      }, this);
    }, 
    cloneEvents: function(from, type)
    {}
  });
  Element.NativeEvents = {load: 1, DOMContentLoaded: 1};
  (function()
  {
    var domready = function()
    {
      if(Browser.loaded)
      {
        return ;
      }

      Browser.loaded = true;
      window.fireEvent('domready');
      document.fireEvent('domready');
    };
    window.addEvent('load', domready);
    if(Browser.Engine.trident);
    else if(Browser.Engine.webkit);
    else 
    {
      document.addEvent('DOMContentLoaded', domready);
    }
  })();
</script>
    <script>
  document.addEvent('domready', function()
  {
    var contentContainer = document.getElementById('mainContentContainer');
    contentContainer.textContent += 'Hello from MooTools DOM ready';
  });
</script>

</body>
</html>