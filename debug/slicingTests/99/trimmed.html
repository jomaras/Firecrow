<!DOCTYPE html>
<html>
<head>
    <title>Sylvester - test</title>
    <script>
    var precision = 1e-6;

    var Vector = function (els)
    {
        this.elements = (els.elements || els).slice();
    };

    Vector.prototype = {
        modulus: function ()
        {
            return Math.sqrt(this.dot(this));
        },

        eql: function (vector)
        {
            var n = this.elements.length;
            var V = vector.elements || vector;
            if (n !== V.length)
            {
                return false;
            }

            while (n--)
            {
                if (Math.abs(this.elements[n] - V[n]) > precision)
                {
                    return false;
                }
            }

            return true;
        },

        dot: function (vector)
        {
            var V = vector.elements || vector;
            var i, product = 0, n = this.elements.length;

            if (n !== V.length)
            {
                return null;
            }
            while (n--)
            {
                product += this.elements[n] * V[n];
            }
            return product;
        },

        map: function (fn, context)
        {
            var elements = [];

            this.each(function (x, i)
            {
                elements.push(fn.call(context, x, i));
            });

            return new Vector(elements);
        },

        each: function (fn, context)
        {
            var n = this.elements.length;

            for (var i = 0; i < n; i++)
            {
                fn.call(context, this.elements[i], i + 1);
            }
        },

        subtract: function (vector)
        {
            var V = vector.elements || vector;
            if (this.elements.length !== V.length)
            {
                return null;
            }
            return this.map(function (x, i)
            {
                return x - V[i - 1];
            });
        }
    };

    var Line = function (anchor, direction)
    {
        anchor = new Vector(anchor);
        direction = new Vector(direction);

        var mod = direction.modulus();

        this.anchor = anchor;
        this.direction = new Vector([direction.elements[0] / mod, direction.elements[1] / mod, direction.elements[2] / mod]);
    };

    var Segment = function (startPoint, endPoint)
    {
        startPoint = new Vector(startPoint);
        endPoint = new Vector(endPoint);

        this.line = new Line(startPoint, endPoint.subtract(startPoint));
        this.start = startPoint;
        this.end = endPoint;

        return this;
    };

    function areEqual(segment1, segment2)
    {
        return (segment1.start.eql(segment2.start) && segment1.end.eql(segment2.end)) || (segment1.start.eql(segment2.end) && segment1.end.eql(segment2.start));
    }
    </script>
</head>
<body>
<h2>Sylvester - test</h2>
<div id="resultContainer"></div>
<script>
    var segment1 = new Segment([5,5], [10,10]);
    var segment2 = new Segment([1,1], [1,2]);

    var a2 = !areEqual(segment1, segment2);
    a2;
</script>
</body>
</html>