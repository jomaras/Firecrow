<!DOCTYPE HTML>
<html>
<head>
    <title>Debugging Firecrow</title>
    <style>
        .keyword{ color: #00008b;}
        .identifier { font-weight: normal;}
        .literal { color: red; }
        .string { color: red; }
        .number { color: #ff4500; }
        body
        {
            font-family: Consolas;
        }

        td { vertical-align: top;}

        .codeLinesContainer
        {
            float:left;
            color:green;
            width:20px;
        }

        .sourceContainer, .commandsContainer
        {
            float: left;
            margin-left: 10px;
        }

        .clearer { clear: both;}
    </style>

    <script type="text/javascript" src="../jsonVisualizer/json-min.js"></script>
    <script type="text/javascript" src="../jsonVisualizer/BubbleTooltips.js"></script>
    <script type="text/javascript" src="../jsonVisualizer/jsonParse.js"></script>

    <script>
        var FBL = undefined;
    </script>
    <script src="../chrome/content/Firecrow/initFBL.js"></script>
    <script src="../chrome/content/Firecrow/helpers/valueTypeHelper.js"></script>
    <script src="../chrome/content/Firecrow/helpers/ASTHelper.js"></script>
    <script src="../chrome/content/Firecrow/interpreter/commands/CommandGenerator.js"></script>
    <script src="../chrome/content/Firecrow/codeMarkupGenerator/codeMarkupGenerator.js"></script>
    <script src="data.js"></script>
</head>
<body>
      <h1>Firecrow Debug page</h1>
      <div id="mainContainer"></div>
      <script>
          var commands = FBL.Firecrow.Interpreter.Commands;
          var codeMarkupGenerator = FBL.Firecrow.CodeMarkupGenerator;
          var commandGenerator = commands.CommandGenerator;
          var commandSets = testData.map(function(program)
          {
              return ;
          });

          var html = "<div>";
          testData.forEach(function(program, index)
          {
              html += "<div class='codeCommandRow'>"
                                + "<div style='color:red; font-weight: bolder;' class='clearer'>Test" + index + ":</div>"
                                + "<div class='codeLinesContainer'></div>"
                                + "<div class='sourceContainer'><div class='codeContainer'>" + codeMarkupGenerator.generateHtml(program) + "</div></div>"
                                + "<div class='commandsContainer'>" + getJSONHTML(JSON.stringify(commandGenerator.generateCommands(program))) + "</div>"
                                + "<div class='clearer'></div>"
                         + "</div>"
                         + "<div>******************************";
          });

          html += "</div>";

          document.getElementById("mainContainer").innerHTML = html;

          (function minimizeAll()
          {
               var widgetButtons = document.querySelectorAll(".widgets > img");

               for(var i = 0; i < widgetButtons.length; i++)
               {
                   widgetButtons[i].onclick();
               }
          })();

          (function addCodeLines()
          {
              var codeCommandRows = document.querySelectorAll(".codeCommandRow");

              for(var i = 0; i < codeCommandRows.length; i++)
              {
                  var codeCommandRow = codeCommandRows[i];
                  var lineContainer = codeCommandRow.children[1];
                  var codeContainer = codeCommandRow.children[2].children[0];

                  var numberOfLines = codeContainer.offsetHeight / 20;

                  var linesHtml = "";

                  for(var j = 1; j <= numberOfLines; j++)
                  {
                      linesHtml += "<div>" + j + ":</div>";
                  }

                  lineContainer.innerHTML = linesHtml;
              }
          })();

      </script>
</body>
</html>