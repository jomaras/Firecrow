<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="http://localhost/Firecrow/evaluation/libraries/prototype/prototype.js"></script>
    <script src="http://localhost/Firecrow/evaluation/libraries/prototype/classes.js"></script>
</head>
<body>
    <div id="test_node">
        <div></div>
        <div></div>
        <div></div>
    </div>
      <script>
          var tom   = new Cat('Tom');
          var jerry = new Mouse('Jerry');

          Animal.addMethods({
              sleep: function() {
                  return this.say('ZZZ');
              }
          });

          Mouse.addMethods({
              sleep: function($super) {
                  return $super() + " ... no, can't sleep! Gotta steal cheese!";
              },
              escape: function(cat) {
                  return this.say('(from a mousehole) Take that, ' + cat.name + '!');
              }
          });

          assertEquals('Tom: ZZZ', tom.sleep(), "added instance method not available to subclass");
          assertEquals("Jerry: ZZZ ... no, can't sleep! Gotta steal cheese!", jerry.sleep());
          assertEquals("Jerry: (from a mousehole) Take that, Tom!", jerry.escape(tom));
          // insure that a method has not propagated *up* the prototype chain:
          assert(!tom.escape);
          assert(!new Animal().escape);

          Animal.addMethods({
              sleep: function() {
                  return this.say('zZzZ');
              }
          });

          assertEquals("Jerry: zZzZ ... no, can't sleep! Gotta steal cheese!", jerry.sleep());
      </script>
</body>
</html>