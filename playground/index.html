<!DOCTYPE html>
<html>

<body>
<script>
    (function()
    {
        var root = this;
        var ArrayProto = Array.prototype;
        var slice = ArrayProto.slice, concat = ArrayProto.concat;
        var nativeFilter = ArrayProto.filter, nativeIndexOf = ArrayProto.indexOf;
        var _ = function(obj)
        {};
        if(typeof exports !== 'undefined');
        else
        {
            root._ = _;
        }

        _.filter = _.select = function(obj, iterator, context)
        {
            if(nativeFilter && obj.filter === nativeFilter)
                return obj.filter(iterator, context);
        };
        _.contains = _.include = function(obj, target)
        {
            if(nativeIndexOf && obj.indexOf === nativeIndexOf)
                return obj.indexOf(target) != -1;
        };
        _.difference = function(array)
        {
            var rest = concat.apply(ArrayProto, slice.call(arguments, 1));
            return _.filter(array, function(value)
            {
                return !(_.contains(rest, value));
            });
        };
        _.mixin = function(obj)
        {
            (null, function(name)
            {
                var func = _[name] = obj[name];
            });
        };
        _.mixin(_);
    }).call(this);
</script>
<script>    function assertEqual(){debugger;}
    var result = _.difference([1, 2, 3], [2, 30, 40]);
    assertEqual(result.join(' '), '1 3', 'takes the difference of two arrays');
    result = _.difference([1, 2, 3, 4], [2, 30, 40], [1, 11, 111]);
    assertEqual(result.join(' '), '3 4', 'takes the difference of three arrays');
</script>

</body>
</html>