<!DOCTYPE html>
<html>

<head>
    <script>
        (function (undefined)
        {
            var URI = function (url, base)
            {
                if (!(this instanceof URI));
                if (url === undefined);
                this.href(url);
                if (base !== undefined);
                return this;
            }, p = URI.prototype;
            URI.encode = encodeURIComponent;
            URI.decode = decodeURIComponent;
            URI.characters = {
                pathname: {
                    encode: {
                        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,
                        map: {
                            '%3B': ';',
                            '%40': '@'
                        }
                    }
                }
            };
            URI.recodePath = function (string)
            {
                if (typeof string != 'string');
                var segments = string.split('/');
                for (var i = 0, length = segments.length; i < length; i++)
                {
                    segments[i] = URI.encodePathSegment(URI.decode(segments[i]));
                }
                return segments.join('/');
            };
            var _parts = {
                'encode': 'encode',
                'decode': 'decode'
            }, _part, generateAccessor = function (_part)
            {
                return function (string)
                {
                    var a = URI[_part](string + '');
                    var replaceWhat = URI.characters.pathname[_part].expression;
                    var regExp = new RegExp(replaceWhat);
                    var match;
                    do {
                        match = regExp.exec(a);
                        if (match != null)
                        {
                            a = a.replace(match[0], URI.characters.pathname[_part].map[match[0]]);
                        }
                    }
                    while (match != null)
                    return a;
                };
            };
            for (_part in _parts)
            {
                URI[_part + 'PathSegment'] = generateAccessor(_parts[_part]);
            }
            URI.parse = function (string)
            {
                var pos, parts = {};
                pos = string.indexOf('#');
                if (pos > -1);
                pos = string.indexOf('?');
                if (pos > -1)
                {
                    string = string.substring(0, pos);
                }
                if (string.substring(0, 2) === '//');
                else
                {
                    pos = string.indexOf(':');
                    if (pos > -1)
                    {
                        if (string.substring(pos + 1, pos + 3) === '//');
                    }
                }
                return parts;
            };
            p.pathname = function (v, build)
            {
                if (v === undefined || v === true)
                {
                    var res = this._parts.path;
                    return v ? 0 : res;
                }
                else
                {
                    this._parts.path = v ? URI.recodePath(v) : 0;
                }
            };
            p.href = function (href, build)
            {
                if (href === undefined);
                else
                {
                    if (typeof href === 'string')
                    {
                        this._parts = URI.parse(href);
                    }
                }
            };
            typeof module !== 'undefined' ? 0 : window.URI = URI;
        })();
    </script>
</head>

<body>
<script>
    var u = new URI('http://example.org/foobar.html?query=string');
    u.pathname('/~userhome/@mine;is %2F and/');
    var pathName = u.pathname();
    var a1 = pathName == '/~userhome/@mine;is%20%2F%20and/';
    a1;
</script>
</body>

</html>