<!DOCTYPE html>
<html>
<head><script origin="Firecrow">
    _FIRECROW_HANDLER_MAPPER = [];
</script>
    <title></title>
    <meta charset="UTF-8"/>
    <style>
        #mainContainer { color: blue; }
        .jsContainer { color: red; }
    </style>



    <style origin="reuse">
        #extractContainer { color: green; }
    </style>
</head><body>
<div class="someReuseIntoClass" id="mainContainer">
    This is original content<br/>
    Which ends here<br/>
    *************************
</div>
<script>
    _FIRECROW_HANDLER_MAPPER.push({
        type: 'onload',
        handler: function()
        {
            var mainContainer = document.getElementById('mainContainer');
            mainContainer.textContent += 'Added by JavaScript onload in main app';
        }

    });
</script>


<div class="someExtractClass" id="extractContainer" origin="reuse">
    This is the extracted content
</div>
<script origin="reuse">
    ((function firecrowWrapper()
    {
        _FIRECROW_HANDLER_MAPPER.push({
            type: 'onload',
            handler: function()
            {
                var extractContainer = document.getElementById('extractContainer');
                extractContainer.textContent += '; Added by JavaScript onload in extracted app';
            }

        });
    }
            )());
</script>

<script origin="Firecrow" origin="reuse">
    (function()
    {
        if(!(window._FIRECROW_HANDLER_MAPPER)) { return; }

        var getHandlersOfType = function(handlerType)
        {
            var handlers = [];
            for( var i = 0; i < _FIRECROW_HANDLER_MAPPER.length;i++)
            {
                var map = _FIRECROW_HANDLER_MAPPER[i];
                if(handlerType == map.type)
                {
                    handlers.push(map.handler);
                }
            }

            return handlers;
        };
        var onLoadHandlers = getHandlersOfType('onload');
        if(onLoadHandlers.length != 0)
        {
            window.onload = function()
            {
                var args = arguments;
                var that = this;
                onLoadHandlers.forEach(function(onloadHandler)
                {
                    onloadHandler.apply(that, args);
                });
            };
        }
    }());
</script></body>
</html>