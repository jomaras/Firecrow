<html><head>
    <script>var HNDLR={fApp:{},rApp:{}}
</script>
    <style>
     img:not([o=r]) {border: dashed;}
     .mI:not([o=r]) { width: 300px; }
    </style><script>
     var SRCS=['P.jpg', 'T.jpg'],
             history=[], doc = document;
     proto=HTMLImageElement.prototype
     proto.toggleSrc=function(srcs,c){
          this.src=this.src.indexOf(srcs[0]) == -1 ? srcs[0] : srcs [1]
          history.push(this.src)
          var summ = {};
          for(var i in history){
               if(i == 'next') continue;
              var item = history[i];
              if(!summ[item]) summ[item] = 0
              summ[item]++
             }
             c.textContent=JSON.stringify(summ)
            }
            HNDLR.fApp.onload=function() {
                var im=doc.querySelectorAll("img:not([o=r])")
                  var inf=doc.querySelector("#info")
                 for(var i=0; i<im.length; i++)
                      im[i].onmouseover = function(){
                           this.toggleSrc(SRCS, inf)
                         }}</script>
    <style>
     img[o=r] { border: solid; }
     .r_mI[o=r] { width: 200px; }
    </style><script>
    var R_SRCS=['C.jpg','D.jpg']
    Array.prototype.next=function(c){
         var i = this.indexOf(c)
         var next = 0
         if(i>=0 && i<this.length-1)
              next = i+1
         return this[next]
        }
        iProto=HTMLImageElement.prototype
        iProto.r_toggleSrc=function(s){
            this.src=s.next(this.getAttribute('src'))
            }
            HNDLR.rApp.onload = function(){
                 var im = document.querySelectorAll('img[o=r]')
                 for(var i=0; i<im.length; i++)
                      im[i].onclick = function(){
                          this.r_toggleSrc(R_SRCS)
                         }}</script>
    </head>
<body>
<div id='imCont'>
    <img class="mI" src="P.jpg"/>
    <img class="mI" src="T.jpg"/>
    <id id="info"></div>
<div id='r_imCont' o=r>
    <img class=r_mI src=C.jpg o=r>
    <img class=r_mI src=D.jpg o=r>
    </div>
</div>
<script>window.onload=function(){
    HNDLR.fApp.onload()
    HNDLR.rApp.onload()
    }</script>
</body></html>