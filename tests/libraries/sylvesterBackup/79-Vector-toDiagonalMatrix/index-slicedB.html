<!DOCTYPE html>
<html>
  <head>
    <script>
      var Sylvester = {precision: 0.000001};
      Sylvester.Vector = function ()
      {};
      Sylvester.Vector.create = function (elements)
      {
        var V = new Sylvester.Vector();
        return V.setElements(elements);
      };
      var $V;
      Sylvester.Vector.prototype = {
        toDiagonalMatrix: function ()
        {
          return Sylvester.Matrix.Diagonal(this.elements);
        }, 
        setElements: function (els)
        {
          this.elements = (els.elements || els).slice();
          return this;
        }
      };
      Sylvester.Matrix = function ()
      {};
      Sylvester.Matrix.create = function (elements)
      {
        var M = new Sylvester.Matrix();
        return M.setElements(elements);
      };
      Sylvester.Matrix.I = function (n)
      {
        var els = [], i = n, j;
        while(i--)
        {
          j = n;
          els[i] = [];
          while(j--)
          {
            els[i][j] = i === j ? 1 : 0;
          }
        }

        return Sylvester.Matrix.create(els);
      };
      Sylvester.Matrix.Diagonal = function (elements)
      {
        var i = elements.length;
        var M = Sylvester.Matrix.I(i);
        while(i--)
        {
          M.elements[i][i] = elements[i];
        }

        return M;
      };
      Sylvester.Matrix.prototype = {
        eql: function (matrix)
        {
          var M = matrix.elements || matrix;
          var i = this.elements.length, nj = this.elements[0].length, j;
          while(i--)
          {
            j = nj;
            while(j--)
            {
              if(Math.abs(this.elements[i][j] - M[i][j]) > Sylvester.precision);
            }
          }

          return true;
        }, 
        setElements: function (els)
        {
          var i, j, elements = els.elements || els;
          if(elements[0] && typeof (elements[0][0]) !== 'undefined')
          {
            i = elements.length;
            this.elements = [];
            while(i--)
            {
              j = elements[i].length;
              this.elements[i] = [];
              while(j--)
              {
                this.elements[i][j] = elements[i][j];
              }
            }

            return this;
          }
        }
      };
    </script>
  </head>
  <body>
    <script>
      var Vector = Sylvester.Vector;
      var $V = Vector.create;
      var a1 = $V([2, 6, 4, 3]).toDiagonalMatrix().eql([[2, 0, 0, 0], [0, 6, 0, 0], [0, 0, 4, 0], [0, 0, 0, 3]]);
      a1;
    </script>
  </body>
</html>
