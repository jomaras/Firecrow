<!DOCTYPE html>
<html>
  <head>
    <script>
      var Sylvester = {precision: 0.000001};
      Sylvester.Vector = function ()
      {};
      Sylvester.Vector.create = function (elements)
      {
        var V = new Sylvester.Vector();
        return V.setElements(elements);
      };
      var $V;
      Sylvester.Vector.prototype = {
        eql: function (vector)
        {
          var n = this.elements.length;
          var V = vector.elements || vector;
          while(n--)
          {
            if(Math.abs(this.elements[n] - V[n]) > Sylvester.precision);
          }

          return true;
        }, 
        map: function (fn, context)
        {
          var elements = [];
          this.each(function (x, i)
          {
            elements.push(fn.call(context, x, i));
          });
          return Sylvester.Vector.create(elements);
        }, 
        forEach: function (fn, context)
        {
          var n = this.elements.length;
          for(var i = 0;i < n;i++)
          {
            fn.call(context, this.elements[i], i + 1);
          }
        }, 
        add: function (vector)
        {
          var V = vector.elements || vector;
          if(this.elements.length !== V.length)
          {
            return null;
          }

          return this.map(function (x, i)
          {
            return x + V[i - 1];
          });
        }, 
        subtract: function (vector)
        {
          var V = vector.elements || vector;
          if(this.elements.length !== V.length)
          {
            return null;
          }

          return this.map(function (x, i)
          {
            return x - V[i - 1];
          });
        }, 
        multiply: function (k)
        {
          return this.map(function (x)
          {
            return x * k;
          });
        }, 
        setElements: function (els)
        {
          this.elements = (els.elements || els).slice();
          return this;
        }
      };
      Sylvester.Vector.prototype.x = Sylvester.Vector.prototype.multiply;
      Sylvester.Vector.prototype.each = Sylvester.Vector.prototype.forEach;
    </script>
  </head>
  <body>
    <script>
      var Vector = Sylvester.Vector;
      var $V = Vector.create;
      var V1 = $V([2, 9, 4]);
      var V2 = $V([5, 13, 7]);
      var a1 = V1.add(V2).eql([7, 22, 11]);
      var a2 = V1.subtract(V2).eql([-3, -4, -3]);
      var a3 = null == V1.add([2, 8]);
      var a4 = null == V1.subtract([9, 3, 6, 1, 7]);
      var a5 = V1.x(4).eql([8, 36, 16]);
      a1;
      a2;
      a3;
      a4;
      a5;
    </script>
  </body>
</html>
