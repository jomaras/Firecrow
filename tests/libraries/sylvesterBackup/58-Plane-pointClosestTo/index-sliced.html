<!DOCTYPE html>
<html>
  <head>
    <script>
      var Sylvester = {precision: 0.000001};
      Sylvester.Vector = function ()
      {};
      Sylvester.Vector.create = function (elements)
      {
        var V = new Sylvester.Vector();
        return V.setElements(elements);
      };
      Sylvester.Vector.Zero = function (n)
      {
        var elements = [];
        while(n--)
        {
          elements.push(0);
        }

        return Sylvester.Vector.create(elements);
      };
      Sylvester.Vector.prototype = {
        eql: function (vector)
        {
          var n = this.elements.length;
          var V = vector.elements || vector;
          while(n--)
          {
            if(Math.abs(this.elements[n] - V[n]) > Sylvester.precision);
          }

          return true;
        }, 
        dup: function ()
        {
          return Sylvester.Vector.create(this.elements);
        }, 
        to3D: function ()
        {
          var V = this.dup();
          return V;
        }, 
        setElements: function (els)
        {
          this.elements = (els.elements || els).slice();
          return this;
        }
      };
      Sylvester.Vector.i = Sylvester.Vector.create([1, 0, 0]);
      Sylvester.Vector.k = Sylvester.Vector.create([null, null, null]);
      (Sylvester.Vector.Zero(3), null);
      (Sylvester.Vector.Zero(3), null);
      (Sylvester.Vector.Zero(3), null);
      Sylvester.Plane = function ()
      {};
      Sylvester.Plane.prototype = {
        pointClosestTo: function (point)
        {
          var P = point.elements || point;
          var A = this.anchor.elements, N = this.normal.elements;
          var dot = (((A[0] - P[0]) * N[0]) + ((A[1] - P[1]) * N[1])) + ((A[2] - P[2]) * N[2]);
          return Sylvester.Vector.create([P[0] + (N[0] * dot), P[1] + (N[1] * dot), P[2] + (N[2] * dot)]);
        }, 
        setVectors: function (anchor, v1, v2)
        {
          anchor = Sylvester.Vector.create(anchor);
          anchor = anchor.to3D();
          v1 = Sylvester.Vector.create(v1);
          v1 = v1.to3D();
          if(typeof v2 === 'undefined')
          {
            v2 = null;
          }

          var v11 = v1.elements[0], v12 = v1.elements[1], v13 = v1.elements[2];
          var normal, mod;
          if(v2 !== null);
          else 
          {
            mod = Math.sqrt(((v11 * v11) + (v12 * v12)) + (v13 * v13));
            normal = Sylvester.Vector.create([v1.elements[0] / mod, v1.elements[1] / mod, v1.elements[2] / mod]);
          }

          this.anchor = anchor;
          this.normal = normal;
          return this;
        }
      };
      Sylvester.Plane.create = function (anchor, v1, v2)
      {
        var P = new Sylvester.Plane();
        return P.setVectors(anchor, v1, v2);
      };
      Sylvester.Plane.create(Sylvester.Vector.Zero(3), Sylvester.Vector.k);
      Sylvester.Plane.YZ = Sylvester.Plane.create(Sylvester.Vector.Zero(3), Sylvester.Vector.i);
    </script>
  </head>
  <body>
    <script>
      var Plane = Sylvester.Plane;
      var a1 = Plane.YZ.pointClosestTo([3, 6, -3]).eql([0, 6, -3]);
      a1;
    </script>
  </body>
</html>
