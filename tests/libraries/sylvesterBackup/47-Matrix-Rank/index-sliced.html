<!DOCTYPE html>
<html>
  <head>
    <script>
      var Sylvester = {precision: 0.000001};
      Sylvester.Matrix = function ()
      {};
      Sylvester.Matrix.create = function (elements)
      {
        var M = new Sylvester.Matrix();
        return M.setElements(elements);
      };
      var $M;
      Sylvester.Matrix.prototype = {
        dup: function ()
        {
          return Sylvester.Matrix.create(this.elements);
        }, 
        toRightTriangular: function ()
        {
          var M = this.dup(), els;
          var n = this.elements.length, i, j, np = this.elements[0].length, p;
          for(i = 0;i < n;i++)
          {
            if(M.elements[i][i] === 0)
            {
              for(j = i + 1;j < n;j++);
            }

            if(M.elements[i][i] !== 0)
            {
              for(j = i + 1;j < n;j++)
              {
                var multiplier = M.elements[j][i] / M.elements[i][i];
                els = [];
                for(p = 0;p < np;p++)
                {
                  els.push(p <= i ? 0 : M.elements[j][p] - (M.elements[i][p] * multiplier));
                }

                M.elements[j] = els;
              }
            }
          }

          return M;
        }, 
        rank: function ()
        {
          var M = this.toRightTriangular(), rank = 0;
          var i = this.elements.length, nj = this.elements[0].length, j;
          while(i--)
          {
            j = nj;
            while(j--)
            {
              if(Math.abs(M.elements[i][j]) > Sylvester.precision)
              {
                rank++;
                break;
              }
            }
          }

          return rank;
        }, 
        setElements: function (els)
        {
          var i, j, elements = els.elements || els;
          if(elements[0] && typeof (elements[0][0]) !== 'undefined')
          {
            i = elements.length;
            this.elements = [];
            while(i--)
            {
              j = elements[i].length;
              this.elements[i] = [];
              while(j--)
              {
                this.elements[i][j] = elements[i][j];
              }
            }

            return this;
          }
        }
      };
      Sylvester.Matrix.prototype.rk = Sylvester.Matrix.prototype.rank;
    </script>
  </head>
  <body>
    <script>
      var Matrix = Sylvester.Matrix;
      var $M = Matrix.create;
      var M = $M([[1, 9, 4, 6], [9, 2, 7, 4], [18, 4, 14, 8]]);
      var a1 = 2 == M.rk();
      a1;
    </script>
  </body>
</html>
